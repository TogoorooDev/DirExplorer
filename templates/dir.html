{{ $filesdir := .Filenames  }}

<!DOCTYPE HTML>
<html>
	<head>
		<title>{{ .Dirname }}</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="description" content="Fileserver serving directory {{.Dirname}}">
		<style>
				.title {
					/*font-family: ;*/
					border-top: 50px;
					border-bottom: 50px;
				}
			
				li {
					list-style-type: none;
					border-top: 10px;
					border-bottom: 10px;
				}			
		
				.file {
					/*text-decoration: none;
					color: black;*/
					font-size: 1.1rem;
				}

				#submit {
					font-size: 1.01rem;
				}

				/*.thumbnail {
					border-top: 50px;
					border-bottom: 50px;
				}*/
		</style>
	</head>

	<body>
		<h1 class="title"><i>Directory of {{ .Dirname }}</i></h1>

		<!-- Select Layouts  -->
		<form action="/{{.Dirname}}" method="POST">
			{{if .Thumbnails}}
				<input type="submit" id="submit" value="Disable Image Thumbnails" />
				<input type="hidden" id="thumbnails" name="thumbnails" value="false" />
			{{else}}
				<input type="submit" id="submit" value="Enable Image Thumbnails" />
				<input type="hidden" id="thumbnails" name="thumbnails" value="true" />
			{{end}}
		</form>
		
		<!-- Display -->

		<ul>
		{{/* }}
		{{if ne .Dirname "/"}}
			<li>
				<a class="file" href="/{{.Dotdot}}">..</a>
			</li>
		{{end}}
		{{ */}}

		{{ if .Thumbnails }}
			{{range $fileindex, $fileinfo := $filesdir }}
				{{$filename := ""}}
				{{if $fileinfo.Dir }}
					{{$filename = (printf "%s/" $fileinfo.Name)}}
				{{else}}
					{{$filename = $fileinfo.Name}}
				{{end}}				

				{{if or ( eq $fileinfo.Ext "png" ) ( eq $fileinfo.Ext "jpg" )}}
					<li>
						<a class="link" href="{{$filename}}">
							<img class="thumbnail" src="{{$filename}}" alt="{{$filename}}" width="250" >
						</a>
					</li>
				{{else}}
					<li>
						<a class="link" href="{{$filename}}">
							<p class="file">{{$filename}}</p>
						</a>
					</li>
				{{end}}
			{{end}}
			
		{{else}}
			{{range $fileindex, $fileinfo := $filesdir }}
				{{$filename := ""}}
				{{if $fileinfo.Dir }}
					{{$filename = (printf "%s/" $fileinfo.Name)}}
				{{else}}
					{{$filename = $fileinfo.Name}}
				{{end}}	
							
				<li>
					<a class="link" href="{{$filename}}">
						<p class="file">{{$filename}}</p>
					</a>
				</li>
			{{end}}
			
		{{end}}
		</ul>
	</body>

</html>
